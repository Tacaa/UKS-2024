<mat-drawer-container class="drawer-container" autosize>
  <mat-drawer #rightDrawer class="drawer" position="end" mode="over">
    <div class="logo">
      <app-user-avatar [disabled]="true" />

      <button (click)="rightDrawer.toggle()" mat-icon-button>
        <mat-icon class="info-color">clear</mat-icon>
      </button>
    </div>

    <div class="menu-container">
      <a
        mat-menu-item
        [routerLink]="['/dockerhub/profile']"
        rel="noopener noreferrer"
      >
        <mat-icon>person</mat-icon>
        <span>My profile</span>
      </a>
      <a
        mat-menu-item
        routerLink="/dockerhub/accountSettings"
        rel="noopener noreferrer"
      >
        <mat-icon>manage_accounts</mat-icon>
        <span>Account settings</span>
      </a>
      <mat-divider class="divider-spacing" />
      <button mat-menu-item (click)="logout()" routerLinkActive="active">
        <span>Sign out</span>
      </button>
    </div>
  </mat-drawer>

  <div class="sidenav-content">
    <mat-toolbar color="primary">
      <div class="">
        <img
          class="logo-mini"
          src="./../../../../assets/images/logo_beli.png"
          alt=""
        />
      </div>

      <span class="name-first-part">docker</span>
      <span class="name-second-part">hub</span>

      <div class="menu-items">
        <!-- Everyone sees "Explore" -->
        <button
          class="menu-item-button"
          mat-menu-item
          routerLink="/dockerhub/explore"
          routerLinkActive="router-link-active"
          [class.underline]="selectedButton === 'explore'"
          (click)="setActive('explore')"
        >
          <span class="menu-item">Explore</span>
        </button>

        <!-- USER and above -->
        <ng-container *ngIf="hasAtLeast(RoleEnum.USER)">
          <button
            class="menu-item-button"
            mat-menu-item
            routerLink="/dockerhub/repository"
            routerLinkActive="router-link-active"
            [class.underline]="selectedButton === 'repositories'"
            (click)="setActive('repositories')"
          >
            <span class="menu-item">Repositories</span>
          </button>

          <button
            class="menu-item-button"
            mat-menu-item
            routerLink="/dockerhub/organizations"
            routerLinkActive="router-link-active"
            [class.underline]="selectedButton === 'organizations'"
            (click)="setActive('organizations')"
          >
            <span class="menu-item">Organizations</span>
          </button>

          <button
            class="menu-item-button"
            mat-menu-item
            routerLink="/dockerhub/usage"
            routerLinkActive="router-link-active"
            [class.underline]="selectedButton === 'usage'"
            (click)="setActive('usage')"
          >
            <span class="menu-item">Usage</span>
          </button>
        </ng-container>

        <!-- ADMIN and SUPER_ADMIN -->
        <ng-container *ngIf="hasAtLeast(RoleEnum.ADMIN)">
          <button
            class="menu-item-button"
            mat-menu-item
            routerLink="/dockerhub/adminPanel"
            routerLinkActive="router-link-active"
            [class.underline]="selectedButton === 'adminPanel'"
            (click)="setActive('adminPanel')"
          >
            <span class="menu-item">Admin Panel</span>
          </button>
        </ng-container>

        <!-- SUPER_ADMIN only -->
        <ng-container *ngIf="hasRoleEnum(RoleEnum.SUPER_ADMIN)">
          <button
            class="menu-item-button"
            mat-menu-item
            routerLink="/dockerhub/createAdministrator"
            routerLinkActive="router-link-active"
            [class.underline]="selectedButton === 'addAdministrator'"
            (click)="setActive('addAdministrator')"
          >
            <span class="menu-item">Add Administrator</span>
          </button>
        </ng-container>

        <!-- Unauthenticated users see Login and Register -->
        <ng-container *ngIf="userRoleEnum == null">
          <button
            class="menu-item-button"
            mat-menu-item
            routerLink="/dockerhub/login"
            routerLinkActive="router-link-active"
            [class.underline]="selectedButton === 'login'"
            (click)="setActive('login')"
          >
            <span class="menu-item">Login</span>
          </button>

          <button
            class="menu-item-button"
            mat-menu-item
            routerLink="/dockerhub/register"
            routerLinkActive="router-link-active"
            [class.underline]="selectedButton === 'register'"
            (click)="setActive('register')"
          >
            <span class="menu-item">Register</span>
          </button>
        </ng-container>
      </div>

      <span class="spacer"></span>

      <div class="toolbar-actions">
        <!-- Updated HTML template -->
        <div>
          <mat-form-field class="search">
            <mat-icon class="search-icn" matPrefix>search</mat-icon>
            <input
              #searchInput
              matInput
              placeholder="Type to search..."
              (keydown.enter)="onSearchSubmit(searchInput.value)"
            />
          </mat-form-field>
        </div>

        <app-user-avatar
          *ngIf="hasAtLeast(RoleEnum.USER)"
          (onAvatarClick)="rightDrawer.toggle()"
        />
      </div>
    </mat-toolbar>

    <div class="content-container">
      <router-outlet></router-outlet>
    </div>
  </div>
</mat-drawer-container>

<mat-menu #menu="matMenu"></mat-menu>
